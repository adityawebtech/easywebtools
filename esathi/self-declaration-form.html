<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>UP स्वप्रमाणित घोषणा-पत्र</title>
  <style>
    body { font-family: "Noto Sans Devanagari", Mangal, "Arial Unicode MS", Arial, sans-serif; margin:0; background: #f5f6fa;}
    /* Header/Navbar */
    .main-header {
      width: 100%;
      background: #097671;
      color: #fff;
      box-shadow: 0 2px 6px #bbb;
      margin-bottom: 0.5em;
      position: relative;
      z-index: 200;
    }
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 25px;
      position: relative;
    }
    .navbar-brand {
      font-size: 23px;
      font-weight: 750;
      letter-spacing: 1px;
      z-index: 201;
    }
    .hamburger {
      background: #049382;
      color: #fff;
      font-size: 28px;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      cursor: pointer;
      display: none;
      z-index: 201;
      transition: background 0.2s;
      box-shadow: 0 2px 8px #04786533;
    }
    .hamburger:active {
      background: #095048;
    }
    /* Side nav menu */
    .nav-menu {
      position: fixed;
      top: 0;
      right: -325px;
      height: 100%;
      width: 290px;
      max-width: 90vw;
      background: #097671;
      box-shadow: -3px 0 18px #09494535;
      list-style: none;
      padding: 86px 0 0 0;
      margin: 0;
      flex-direction: column;
      gap: 0;
      display: flex;
      transition: right 0.4s cubic-bezier(.67,-0.29,.64,1.43);
      z-index: 300;
      border-top-left-radius: 26px;
      border-bottom-left-radius: 10px;
    }
    .nav-menu.active {
      right: 0;
    }
    .nav-menu li {
      border-bottom: 1px solid #23b5ae33;
      padding: 0 0 0 25px;
    }
    .nav-menu li:last-child {
      border-bottom: none;
    }
    .nav-menu li a {
      color: #e1fffb;
      text-decoration: none;
      font-size: 19px;
      font-weight: 600;
      padding: 18px 0 17px 0;
      display: block;
      transition: color 0.22s, background 0.15s;
      border-radius: 4px;
    }
    .nav-menu li a:hover {
      color: #64f7d2;
      background: #0a8e7e25;
    }
    /* Backdrop for side nav */
    .nav-backdrop {
      content: "";
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: #1e353d40;
      z-index: 200;
    }
    .nav-backdrop.active {
      display: block;
    }
    @media (max-width: 700px) {
      .navbar { padding: 9px 8px; }
      .hamburger { display: block; }
      .container { max-width: 100vw; padding:5px; }
      .field { min-width:97vw; }
      label, .instructions { font-size:15px; }
    }
    /* For desktop menu, hide off-canvas, just for completeness */
    @media (min-width: 701px) {
      .hamburger { display: block; }
    }
    /* Main container */
    .container { max-width: 950px; margin: 15px auto; background:#fff; border-radius:8px; box-shadow:0 1px 6px #ccc; padding: 18px; }
    h2 { text-align:center; margin:0 0 20px 0;}
    .instructions {
      background: #e2fff5;
      padding: 9px 15px;
      border-radius: 5px;
      font-size: 15px;
      margin-bottom: 13px;
      line-height:1.7;
    }
    form { display:flex; flex-wrap:wrap; gap:13px; }
    .field { flex:1 0 260px; min-width:170px; }
    .field label { font-weight:600; display:block; margin-bottom:4px;}
    .field input, .field textarea {
      width: 98%; font-size:15px; padding:6.5px; border: 1px solid #bbb; border-radius: 4px; margin-bottom: 2px; background:#fafcff;}
    .field input[type="file"] { padding:3px;}
    #preview-signature { width:120px; margin:10px 0; display:none; border:1px solid #ddd; border-radius:3px;}
    .btn { background:#097671; color:#fff; border-radius:4px; border:0; padding:9px 18px; font-size:16px; cursor:pointer;}
    .btn:active { background:#064d4b; }
    .output-block { text-align:center; margin-top:22px;}
    #result-img { max-width:98%; border:1px solid #b8b8b8; margin-top:12px;}
    /* Progress area style */
    #progress-bar-area {text-align:center; margin-top:15px; }
    #progress-btn[disabled] {
      opacity: 0.85;
      background: #0a877a;
      color: #daf6ff;
      font-weight: 500;
    }
    /* Content section styles */
    .tool-info-wrapper {
      margin: 0 auto 36px auto;
      background: #f1fafb;
      border-radius: 7px;
      box-shadow: 0 1px 7px #bbdcde1a;
      padding: 22px 16px 22px 16px;
      max-width: 900px;
      color: #0b3450;
      font-size: 17px;
      line-height: 1.8;
    }
    .tool-info-wrapper h3 {
      color: #097671;
      font-size: 23px;
      font-weight: 800;
      margin: 7px 0 7px 0;
    }
    .tool-info-wrapper ul, .tool-info-wrapper ol { margin-bottom: 10px; }
    .tool-info-wrapper li { margin-bottom: 4px; }
    .tool-info-wrapper b { color: #095858; }
    .tool-info-wrapper .step-list { margin-left: 16px; }
    /* Disclaimer box */
    .disclaimer {
      background: #fff2e1;
      color: #a04c00;
      border: 1px solid #f27829;
      border-radius: 6px;
      padding: 13px 18px;
      margin: 30px auto 5px auto;
      max-width: 900px;
      font-size: 15.5px;
      text-align: center;
      font-weight: bold;
      box-shadow: 0 2px 7px #f8eee066;
    }
    /* Footer */
    .site-footer {
      background: #097671;
      color: #e6f5fa;
      text-align: center;
      padding: 16px 12px 14px 12px;
      font-size: 15.2px;
      margin-top: 25px;
      border-radius: 0 0 8px 8px;
      box-shadow: 0 0.5px 10px #abd7df2e;
    }
  </style>
</head>
<body>
  <header class="main-header">
    <nav class="navbar">
      <span class="navbar-brand">UP घोषणा-पत्र</span>
      <button class="hamburger" id="hamburger">&#9776;</button>
      <ul class="nav-menu" id="navMenu">
        <li><a href="#">Home</a></li>
        <li><a href="#">Help</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
      <div class="nav-backdrop" id="navBackdrop"></div>
    </nav>
  </header>
  <div class="tool-info-wrapper">
    <h3>What is UP Self Declaration Form?</h3>
    <p>
      The <b>UP Self Declaration Form</b> is a mandatory document required by the Uttar Pradesh administration for various certificates like Income, Caste, and Domicile. This form is a self-attested affidavit stating that the details provided by the applicant are true to the best of their knowledge.
    </p>
    <h3>UP Self Declaration Form Online Fill Up</h3>
    <p>
      You can now fill and generate your UP Self Declaration Form completely online, without visiting any government office. Just enter your details, upload your signature, and instantly download the pre-filled form.
    </p>
    <ul>
      <li>Fill And Generate Self Declaration Form for <b>Income Certificate</b></li>
      <li>Fill And Generate Self Declaration Form for <b>Caste Certificate</b></li>
      <li>Fill And Generate Self Declaration Form for <b>Domicile Certificate</b></li>
      <li>Esathi Self Declaration Form Online Fill Up</li>
    </ul>
    <h3>Steps to Write on Uttar Pradesh Self Declaration Form using ToolsWagon UP Self Declaration Form tool:</h3>
    <ol class="step-list">
      <li>Enter the applicant’s <b>Name</b>, <b>Father’s Name</b>, <b>Age</b>, <b>Occupation</b>, <b>Address</b>, <b>Place</b>, <b>Date</b>, and <b>Applicant Name</b>.</li>
      <li>Upload your signature in JPG/PNG format. The tool will automatically remove the white background.</li>
      <li>Click <b>“Generate & Download”</b>. Wait for the process to complete.</li>
      <li>Download your ready-to-use, correctly formatted Self Declaration Form, ready for government use.</li>
    </ol>
    <h3>Benefits of using Uttar Pradesh Self Declaration form tool</h3>
    <ul>
      <li><b>Instant image generation</b> – No manual writing or printing required.</li>
      <li><b>Mobile-friendly</b> – Works on phone and computer, in Hindi or English.</li>
      <li><b>Clean formatting</b> – Form is auto-filled in the right areas.</li>
      <li><b>Easy signature integration</b> – Upload your sign, background auto-removed for neat finish.</li>
      <li><b>File size optimized</b> – Download is always less than 100KB for online uploads.</li>
      <li><b>No login required</b> – 100% free and instant, with privacy guaranteed.</li>
    </ul>
  </div>
  <div class="container">
    <h2>
      स्वप्रमाणित घोषणा-पत्र (Self Declaration Form – UP)<br>
      <span style="font-size:15.5px;color:#1a465c;">ऑनलाइन फॉर्म भरें, हिंदी-इंग्लिश, मोबाइल-फ्रेंडली</span>
    </h2>
    <div class="instructions">
      <b>निर्देश (Instructions):</b><br>
      1. सभी प्रविष्टियाँ (Name, पिता का नाम आदि) हिंदी/English में भरें।<br>
      2. हस्ताक्षर (Signature) JPG/PNG फ़ाइल अपलोड करें। सफेद बैकग्राउंड अपने-आप ट्रांसपेरेंट (हट) हो जाएगा।<br>
      3. "Generate & Download" बटन से इमेज (&lt;100KB) तुरंत डाउनलोड करें।
      <br>
      <span style="color:#a43;font-size:14px;">
        कृपया जानकारी ध्यानपूर्वक भरें! (Fill details correctly, it will be printed onto the official form.)
      </span>
    </div>
    <form id="declarationForm" autocomplete="off">
      <div class="field">
        <label>नाम (Name):</label>
        <input type="text" name="name" maxlength="45" required>
      </div>
      <div class="field">
        <label>पिता का नाम (Father's Name):</label>
        <input type="text" name="father" maxlength="45" required>
      </div>
      <div class="field">
        <label>आयु (Age):</label>
        <input type="number" name="age" min="1" max="120" required>
      </div>
      <div class="field">
        <label>व्यवसाय (Occupation):</label>
        <input type="text" name="occupation" maxlength="35" required>
      </div>
      <div class="field" style="flex-basis: 95%;">
        <label>निवासी/पूरा पता (Address):</label>
        <textarea name="address" rows="2" maxlength="85" required></textarea>
      </div>
      <div class="field">
        <label>स्थल (Place):</label>
        <input type="text" name="place" maxlength="35" required>
      </div>
      <div class="field">
        <label>दिनांक (Date):</label>
        <input type="date" name="date" required>
      </div>
      <div class="field">
        <label>हस्ताक्षर (Signature - JPG/PNG):<br><span style="font-weight:400;">(सफेद बैकग्राउंड हटेगा)</span></label>
        <input type="file" accept="image/png,image/jpeg" id="signatureInput" required>
        <img id="preview-signature" src="" alt="Signature Preview">
      </div>
      <div class="field">
        <label>आवेदक का नाम (Applicant Name):</label>
        <input type="text" name="applicant_name" maxlength="45" required>
      </div>
      <div style="flex-basis:100%;margin-top:13px;text-align:center;">
        <button class="btn" type="submit">Generate & Download</button>
      </div>
    </form>
    <!-- Progress bar area -->
    <div id="progress-bar-area" style="display:none;text-align:center;margin-top:15px;">
      <button id="progress-btn" class="btn" type="button" disabled>
        <span id="progress-text">Processing... 15s</span>
      </button>
    </div>
    <div class="output-block" id="output" style="display: none;">
      <h3>डाउनलोड करें (Download):</h3>
      <a id="download-link" href="#" download="UP-Declaration.jpg" class="btn">Download Image</a>
      <div><img id="result-img" src=""></div>
    </div>
  </div>
  <div class="disclaimer">
    This website is <b>NOT</b> the official website of the Government of Uttar Pradesh.<br>
    It is created only for educational and informational purposes, to help people easily fill and generate UP Self Declaration Forms online. Always verify details from the official government portal before use.
  </div>
  <footer class="site-footer">
    <div>
      &copy; 2025 UP Self Declaration Portal &mdash; Powered by ToolsWagon
    </div>
  </footer>
  <script>
    // Side nav hamburger + backdrop logic
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    const navBackdrop = document.getElementById('navBackdrop');
    hamburger.onclick = function() {
      navMenu.classList.toggle('active');
      navBackdrop.classList.toggle('active');
      document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
    };
    navBackdrop.onclick = function() {
      navMenu.classList.remove('active');
      navBackdrop.classList.remove('active');
      document.body.style.overflow = '';
    };

    let signatureImage=null;
    function makeSignatureTransparent(file, callback) {
      const img = new Image(); img.onload = function() {
        const cv = document.createElement('canvas'), ctx = cv.getContext('2d');
        cv.width = img.width; cv.height = img.height;
        ctx.drawImage(img,0,0);
        let imgd = ctx.getImageData(0,0,cv.width,cv.height);
        let d = imgd.data;
        for(let i=0;i<d.length;i+=4) {
          if(d[i]>240 && d[i+1]>240 && d[i+2]>240){ d[i+3]=0; }
        }
        ctx.putImageData(imgd,0,0);
        callback(cv);
      }; img.src = URL.createObjectURL(file);
    }
    document.getElementById("signatureInput").addEventListener("change",function(e){
      const file = e.target.files[0];
      if(!file) return;
      makeSignatureTransparent(file, function(canvas){
        signatureImage=canvas;
        let el=document.getElementById('preview-signature');
        el.src=canvas.toDataURL();
        el.style.display="block";
      });
    });

    function drawFormOnImage(ctx, fields, w, h) {
      ctx.font='19px "Noto Sans Devanagari", Mangal, "Arial Unicode MS", Arial, sans-serif';
      ctx.fillStyle="#191919";
      ctx.textBaseline="top";
      ctx.fillText(fields.name, 316, 558);
      ctx.fillText(fields.father, 808, 555);
      ctx.fillText(fields.age, 218, 613);
      ctx.fillText(fields.occupation, 482, 609);
      ctx.font = '18px "Noto Sans Devanagari", Mangal, Arial, sans-serif';
      let addr = fields.address.trim();
      let maxChars = 38;
      if (addr.length <= maxChars) {
        ctx.fillText(addr, 723, 605);
      } else {
        let breakIndex = addr.lastIndexOf(" ", maxChars);
        let line1, line2;
        if (breakIndex === -1) {
          line1 = addr.substring(0, maxChars - 1) + "-";
          line2 = addr.substring(maxChars - 1);
        } else {
          line1 = addr.substring(0, breakIndex);
          line2 = addr.substring(breakIndex + 1);
          if (
            addr.charAt(breakIndex + 1) !== " " &&
            breakIndex < addr.length - 1 &&
            !/\s/.test(addr.charAt(breakIndex)) &&
            !line1.endsWith(" ")
          ) {
            line1 += "-";
          }
        }
        ctx.fillText(line1, 723, 605);
        ctx.fillText(line2, 166, 659);
      }
      ctx.font='19px "Noto Sans Devanagari", Mangal, Arial, sans-serif';
      ctx.fillText(fields.place, 238, 1007);
      let dateStr = fields.date ? fields.date.split('-').reverse().join('-') : '';
      ctx.fillText(dateStr, 246, 1055);
      ctx.fillText(fields.applicant_name, 883, 1050);
      if(signatureImage) {
        let sw=160, sh=45;
        let aspect=signatureImage.width/signatureImage.height;
        if(aspect>sw/sh) sh=sw/aspect;
        else sw=sh*aspect;
        ctx.globalAlpha=0.94;
        ctx.drawImage(signatureImage, 922, 980, sw, sh);
        ctx.globalAlpha=1.0;
      }
    }

    document.getElementById("declarationForm").addEventListener('submit', function(e){
      e.preventDefault();
      if(!signatureImage){ alert("कृपया हस्ताक्षर अपलोड करें | Please upload signature."); return; }
      let f = {};
      for(const el of e.target.elements) if(el.name) f[el.name]=el.value;
      const img = new Image();
      img.onload = function(){
        const w=img.naturalWidth, h=img.naturalHeight;
        const c = document.createElement('canvas');
        c.width=w; c.height=h;
        const ctx = c.getContext('2d');
        ctx.drawImage(img,0,0,w,h);
        drawFormOnImage(ctx, f, w, h);
        let q=0.95, out=c.toDataURL('image/jpeg', q);
        while(out.length/1.38>98*1024 && q>0.40) {
          q-=0.08;
          out = c.toDataURL('image/jpeg',q);
        }
        document.getElementById("output").style.display="none";
        document.getElementById("progress-bar-area").style.display="block";
        let timer = 15;
        let progressText = document.getElementById('progress-text');
        progressText.textContent = "Processing... " + timer + "s";
        const interval = setInterval(function(){
          timer--;
          progressText.textContent = "Processing... " + timer + "s";
          if(timer <= 0){
            clearInterval(interval);
            document.getElementById("progress-bar-area").style.display="none";
            document.getElementById("output").style.display="block";
          }
        }, 1000);
        let applicantNameClean = (f.applicant_name || "user").replace(/\s+/g, "_").replace(/[^a-zA-Z0-9_]/g,"");
        let websitePart = "www.toolswagon.site";
        let downloadFileName = `${websitePart}_${applicantNameClean}_self-declaration.jpg`;
        document.getElementById("download-link").setAttribute("download", downloadFileName);
        document.getElementById("download-link").href = out;
        document.getElementById("result-img").src = out;
      };
      img.onerror = function() {
        alert('⚠️ फॉर्म टेम्पलेट इमेज लोड नहीं हो पाई!\nCheck this path:\nhttps://adityawebtech.github.io/url-shortner/sdf.jpg');
      };
      img.src = "https://adityawebtech.github.io/url-shortner/sdf.jpg";
    });
    document.getElementById('declarationForm').addEventListener('input', function(){
      document.getElementById("output").style.display="none";
    });
  </script>
</body>
</html>
